# Netty

### Netty?
- 비동기 이벤트 기반 네트워크 응용프로그램 프레임워크
    - 고성능 네트워크 애플리케이션(서버 및 클라이언트)을 개발하는 데 사용되는 비동기 통신 프레임워크
    - 1개의 이벤트에 대하여 다수의 worker 스레드로 동작
- 단순히 네트워크 통신과 관련된 기능 뿐만이 아니라 여러 네트워크 어플리케이션에서의 기능도 제공하고 있어 서버 개발자들이 자신의 비즈니스 로직에 더 집중할 수 있도록 할 수 있음
- WebFlux의 기반적은 AWS로 Netty를 사용

<br>

### Netty의 특징
- 비동기 입출력
    - Netty 프레임워크는 비동기 처리를 지향
    - 요청을 보낸 뒤 즉시 반환한 다음 다른 작업을 하다 요청한 작업의 처리가 완료되면 나중에 응답 받는 방식
    - 비동기, 논블로킹 I/O를 사용하여 높은 성능과 확장성을 제공하여 높은 동시성 필요 어플리케이션에서 사용
- Event Loop Model
    - 입출력을 위해 정의된 이벤트 모델이 존재
    - 코어 로직을 수정하지 않고도 직접 이벤트 타입을 구현할 수 있도록 지원하며, 각 이벤트 타입은 계층화되어 있어 구분됨
    - Channel Event는 Channel Handlers에 의해 ChannelPipeline에서 처리됨
    - 이벤트의 주체는 소켓이며 데이터를 소켓에 전달하기 위해 데이터 핸들러를 이용되며 로직 분리와 코드의 재사용성 증가, 에러 처리 부담 완화에 도움이됨
- Universal Asynchoronous I/O API
    - TCP, UDP에 따라 다른 형태의 API를 제공
    - TCP 어플리케이션을 UDP로 포팅하는 것은 많은 공수가 필요로 하는데 Netty의 Channel이라는 Async I/O 인터페이스를 이용하여 Point to Point 통신을 추상화 할 수 있음
    - 그렇기 때문에 실제 통신 부분과 상관없이 로직을 개발하여 추후에 통신 방식이 변경되더라도 쉽게 변경할 수 있도록 지원

<br>

### Tomcat?
- 주로 웹 애플리케이션을 호스팅하고 관리하는 HTTP 서버로, 웹 애플리케이션 서버
- 블로킹, 동기 방식을 사용
- 비동기 처리 기능이 지원되었지만, 서블릿은 응답을 기다리는 동안 pool의 스레드들은 여전히 지연시킬 수 있음
- 요청당 하나의 스레드로 동작
- 연결 클라이언트가 적고, IO가 큰 경우 효율적

<br>

| 특징                  | Tomcat                                                | Netty                                                       |
|-----------------------|-------------------------------------------------------|-------------------------------------------------------------|
| **용도**              | 웹 애플리케이션 호스팅 및 관리                        | 고성능 네트워크 애플리케이션 개발                           |
| **프로토콜**          | HTTP/HTTPS                                            | TCP, UDP, HTTP, WebSocket 등 다양한 프로토콜                |
| **기술 스택**         | Java 서블릿, JSP                                      | Java 기반의 비동기, 논블로킹 I/O                            |
| **I/O 모델**          | 전통적으로 블로킹 I/O (비동기 서블릿도 지원)          | 비동기, 논블로킹 I/O                                        |
| **아키텍처**          | 서블릿 컨테이너 및 웹 서버                            | 이벤트 루프 모델                                            |
| **주요 기능**         | 서블릿 실행, JSP 처리, HTTP 요청 처리, 정적 콘텐츠 제공 | 고성능 네트워크 애플리케이션의 효율적 이벤트 처리           |
| **사용 사례**         | 웹 애플리케이션 서버 (예: Spring MVC, JSP 웹 애플리케이션) | 채팅 서버, 게임 서버, 프록시 서버, 메시징 시스템 등          |
| **유연성**            | 주로 HTTP 기반의 웹 애플리케이션에 최적화            | 다양한 네트워크 프로토콜 지원 및 높은 유연성                |
| **확장성**            | HTTP 요청 처리 중심의 확장성 제공                     | 이벤트 루프 모델을 통한 높은 동시성 처리                     |
| **보일러플레이트 코드**| 적음 (웹 애플리케이션에 최적화된 기능 제공)           | 필요 (다양한 네트워크 프로토콜 지원을 위한 설정 필요)        |

<br>

## Ssafy Wizards CS Study

### 1. Netty 사용 이유
- Netty는 비동기, 논블로킹 I/O를 사용하여 높은 성능과 확장성을 제공
- 이벤트 루프 모델을 통해 효율적인 이벤트 처리를 지원
- TCP와 UDP를 아우르는 통합된 비동기 I/O API를 제공하여 통신 방식의 추상화를 가능하게 하고, 코드 재사용성과 유지보수성을 높임
- 즉, 이러한 특성들은 높은 동시성을 필요로 하는 고성능 네트워크 애플리케이션 개발에 적합함

<br>

### Reference
- https://mumomu.tistory.com/176
- https://velog.io/@tkdtn1427/Netty-vs-Tomcat