# 옵티마이저와 힌트

### 생각해볼만한 부분
- InnoDB 스토리지 엔진의 백그라운드 스레드가 연속된 페이지를 읽는 리드 어헤드 (Read ahead) 작업
  - 어떤 영역의 데이터가 앞으로 필요해지리라는 것을 예측해서 요청이 오기 전에 미리 디스크에서 읽어 InnoDB의 버퍼 풀에 가져다 두는 것
  - innodb_read_ahead_threshold 시스템 변수를 이용해 InnoDB 스토리지 엔진이 언제 어헤드를 시작할지 임계값을 설정할 수 있음 ( 시스템 변수에 설정된 개수만큼 연속된 페이지가 읽히면 버퍼 풀에 적재 )
- InnoDB는 테이블 풀 스캔을 진행할 때 디스크로부터 페이지를 여러개 읽어온다
  - 테이블 풀 스캔이 실행되면 처음 몇 개의 데이터 페이지는 포그라운드 스레드가 페이지 읽기를 실행하지만 특정 시점부터는 읽기 작업을 백그라운드 스레드로 넘김
  - 하지만 몇개를 읽을지 설정하는 시스템 변수는 없고 백그라운드 스레드가 읽기를 넘겨받는 시점부터 한 번에 4개 또는 8개씩 읽으면서 계속 그 수를 증가시켜 최대 64개의 데이터 페이지까지 읽어 버퍼 풀에 저장함
  - 포그라운드 스레드는 해당 버퍼 풀에 준비된 데이터를 가져다 사용하기만 하면되므로 상당히 빨리 처리됨
- select count(*) from employees; 처럼 테이블의 레코드 건수를 조회하면 풀 테이블 스캔 대신 풀 인덱스 스캔을 하게될 가능성이 높음
