# 6. 데이터 압축

### 독서 중 궁금해지는 내용
- 테이블 압축시 페이지 크기가 32kb나 64kb는 왜 압축이 불가능한지
- 제네럴 테이블스페이스란?
    - 테이블 스페이스는 DB 파일 시스템에서 데이터를 저장하는 논리적 스토리지 단위
    - InnoDB 스토리지 엔진은 여러 종류의 테이블 스토리지를 지원하며 그중 하나인 제네럴 테이블 스페이스는 특정 데이터베이스에 국한되지 않고 여러 데이터베이스의 테이블을 저장할 수 있는 테이블 스페이스
- InnoDB 스토리지 엔진은 압축된 페이지를 버퍼 풀에 적재하면 압축된 상태와 압축이 해제된 상태 2개 버전을 관리함
    - 압축이 적용된 테이블의 데이터 페이지, 압축이 적용되지 않은 테이블의 데이터 페이지
    - 버퍼 풀의 공간이 필요해지면 압축 해제된 버전은 제거해서 버퍼풀의 공간을 확보함
    - 압축이 자주 사용되는 경우 Unzip_LRU 리스트에 압축 해제된 페이지를 계속 유지하면서 압축 및 압출 해제 작업을 최소화함
    - 압축된 페이지가 사용되지 않아 LRU 리스트에서 제거되는 경우 Unzip_LRU 리스트에서도 함께 제거됨

<br>

## 연습문제

### 1. MySQL 테이블 압축시 페이지 크기가 32kb나 64kb는 왜 압축이 불가능한지?

<details>
<summary>정답</summary>

#### InnoDB
- 4KB, 8KB, 16KB, 32KB, 64KB 페이지 크기를 지원하며 기본적 페이지크기는 16KB
- 테이블 압축 기능은 4KB, 8KB, 16KB 페이지 크기에서만 지원됨

<br>

### 불가능한 이유
- 압축 알고리즘은 작은 페이지 크기에서 더 효율적으로 작동하므로 큰 압축에 대한 압축의 효과가 미미해지고 오히려 압축으로 성능이 저하될 수 있음
- 32KB와 64KB의 페이지 크기는 메모리 관리의 복잡성을 증가시키며, 큰 페이지를 압축하고 관리하는 것은 더 많은 메모리 오버헤드를 초래할 수 있음
- 큰 페이지 크기는 디스크 I/O 효율성 측면에서 문제를 일으킬 수 있음. 압축된 페이지를 디스크에 쓰거나 디스크에서 읽는 과정에서 큰 페이지 크기는 더 많은 데이터를 한꺼번에 처리해야 하기 때문
- InnoDB에서 사용하는 압축 알고리즘(LZ77 변형 알고리즘)은 32KB나 64KB 페이지 크기는 이 알고리즘에 최적화되지 않음

</details>